<%_ /* templates/web/render/passport/views/login.ejs */ _%>
<!-- This file is /views/login.ejs -->
<%%- include('partials/header', { title: 'Login' }) %%>

<div class="container" style="max-width: 560px; margin: 2rem auto;">
  <h1>Sign in</h1>

  <%% if (flash && flash.error && flash.error.length) { %%>
    <div style="color:#a00; margin:.75rem 0;"><%%= flash.error.join('<br>') %%></div>
  <%% } %%>
  <%% if (flash && flash.info && flash.info.length) { %%>
    <div style="color:#0366d6; margin:.75rem 0;"><%%= flash.info.join('<br>') %%></div>
  <%% } %%>

  <%% if (passportStrategies && passportStrategies.includes('local')) { %%>
    <section style="margin: 1.5rem 0;">
      <h2 style="font-size: 1.15rem;">Email &amp; Password</h2>
      <form action="/login" method="post" style="display: grid; gap: .75rem;">
        <label>
          <div>Email</div>
          <input type="email" name="email" required style="width:100%;padding:.5rem" />
        </label>
        <label>
          <div>Password</div>
          <input type="password" name="password" required style="width:100%;padding:.5rem" />
        </label>
        <button type="submit" style="padding:.6rem 1rem; cursor: pointer;">Sign in</button>
      </form>

      <p style="margin-top:1rem;">
        New here? <a href="/register">Create an account</a>
      </p>
    </section>
  <%% } %%>

  <%% if (passportStrategies && passportStrategies.some(s => s !== 'local')) { %%>
    <section style="margin: 1.5rem 0;">
      <h2 style="font-size: 1.15rem;">Continue with</h2>
      <div style="display:flex; gap:.5rem; flex-wrap:wrap;">
        <%% if (passportStrategies.includes('google')) { %%>
          <a href="/auth/google" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Google</a>
        <%% } %%>
        <%% if (passportStrategies.includes('facebook')) { %%>
          <a href="/auth/facebook" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Facebook</a>
        <%% } %%>
        <%% if (passportStrategies.includes('twitter')) { %%>
          <a href="/auth/twitter" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Twitter</a>
        <%% } %%>
        <%% if (passportStrategies.includes('microsoft')) { %%>
          <a href="/auth/microsoft" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Microsoft</a>
        <%% } %%>
        <%% if (passportStrategies.includes('linkedin')) { %%>
          <a href="/auth/linkedin" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">LinkedIn</a>
        <%% } %%>
        <%% if (passportStrategies.includes('steam')) { %%>
          <a href="/auth/steam" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Steam</a>
        <%% } %%>
        <%% if (passportStrategies.includes('amazon')) { %%>
          <a href="/auth/amazon" style="padding:.6rem 1rem; border:1px solid #ddd; text-decoration:none;">Amazon</a>
        <%% } %%>
      </div>
    </section>
  <%% } %%>
</div>

<%%- include('partials/footer') %%>
